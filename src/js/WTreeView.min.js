WT_DECLARE_WT_MEMBER(1,JavaScriptConstructor,"WTreeView",function(l,d,i,v,r){function p(c){var a=-1,b=null,e=false,g=false,h=null;for(c=f.target(c);c;){if(c.className.indexOf("c1 rh")==0){if(a==-1)a=0}else if(c.className.indexOf("Wt-tv-c")==0){if(c.className.indexOf("Wt-tv-c")==0)a=c.className.split(" ")[0].substring(7)*1;else if(a==-1)a=0;if(c.getAttribute("drop")==="true")g=true;h=c}else if(c.className=="Wt-tv-node"){b=c.id;break}if(c.className==="Wt-selected")e=true;c=c.parentNode;if(f.hasTag(c,
"BODY"))break}return{columnId:a,nodeId:b,selected:e,drop:g,el:h}}function w(){if(s&&x)if(!f.isHidden(d)){s=false;var c=y.firstChild,a=o.firstChild,b=0,e=0,g=o.lastChild.className.split(" ")[0];e=f.getCssRule("#"+d.id+" ."+g);if(r)a=a.firstChild;for(var h=0,k=a.childNodes.length;h<k;++h)if(a.childNodes[h].className){var j=a.childNodes[h].className.split(" ")[0];j=f.getCssRule("#"+d.id+" ."+j);if(j.style.display!="none")b+=f.pxself(j,"width")+7}if(!r){if(f.isIE&&$(document.body).hasClass("Wt-rtl"))if(h=
f.getCssRule("#"+d.id+" .Wt-tv-row"))h.style.width=b+"px";if(e.style.width)$(d).find(".Wt-headerdiv ."+g).css("width",e.style.width);else{g=d.scrollWidth-a.offsetWidth-9;if(g>0)e.style.width=g+"px"}}e=b+f.pxself(e,"width")+(f.isIE6?10:7);if(r){j=f.getCssRule("#"+d.id+" .Wt-tv-rowc");j.style.width=b+"px";l.layouts2.adjust();f.isIE&&setTimeout(function(){$(d).find(".Wt-tv-rowc").css("width",b+"px").css("width","")},0);d.changed=true}else{o.style.width=c.style.width=e+"px";a.style.width=b+"px"}}}jQuery.data(d,
"obj",this);var y=i.firstChild,o=v.firstChild,t=this,f=l.WT,x=false;this.click=function(c,a){var b=p(a);b.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"clicked","","")};this.dblClick=function(c,a){var b=p(a);b.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"dblclicked","","")};this.mouseDown=function(c,a){f.capture(null);var b=p(a);if(b.columnId!=-1){l.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"mousedown",
"","");d.getAttribute("drag")==="true"&&b.selected&&l._p_.dragStart(d,a)}};this.mouseUp=function(c,a){var b=p(a);b.columnId!=-1&&l.emit(d,{name:"itemEvent",eventObject:c,event:a},b.nodeId,b.columnId,"mouseup","","")};this.resizeHandleMDown=function(c,a){var b=c.parentNode.className.split(" ")[0];if(b){var e=f.getCssRule("#"+d.id+" ."+b),g=f.pxself(e,"width"),h=-g,k=1E4,j=$(document.body).hasClass("Wt-rtl");if(j){var u=h;h=-k;k=-u}new f.SizeHandle(f,"h",c.offsetWidth,d.offsetHeight,h,k,"Wt-hsh",function(m){m=
g+(j?-m:m);var q=b.substring(7)*1;e.style.width=m+"px";t.adjustColumns();l.emit(d,"columnResized",q,parseInt(m))},c,d,a,-2,-1)}};var s=false;this.adjustColumns=function(){if(!s){s=true;setTimeout(w,0)}};var n=null;d.handleDragDrop=function(c,a,b,e,g){if(n){n.className=n.classNameOrig;n=null}if(c!="end"){var h=p(b);if(!h.selected&&h.drop&&h.columnId!=-1)if(c=="drop")l.emit(d,{name:"itemEvent",eventObject:a,event:b},h.nodeId,h.columnId,"drop",e,g);else{a.className="Wt-valid-drop";n=h.el;n.classNameOrig=
n.className;n.className+=" Wt-drop-site"}else a.className=""}};this.wtResize=function(){x=true;w();var c=$(d),a,b=null,e=f.pxself(d,"width");if(e==0)e=d.clientWidth;else if(f.boxSizing(d)){e-=f.px(d,"borderLeftWidth");e-=f.px(d,"borderRightWidth")}var g=i.offsetWidth-i.clientWidth;if(g>50)g=0;if(i.clientWidth>0)e-=g;if(c.hasClass("column1")){a=c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];a=f.getCssRule("#"+d.id+" ."+a);b=f.pxself(a,"width")}if((!f.isIE||e>100)&&(e!=i.tw||b!=i.c0w||
d.changed)){var h=!d.changed;i.tw=e;i.c0w=b;a=c.find(".Wt-headerdiv").get(0).lastChild.className.split(" ")[0];a=f.getCssRule("#"+d.id+" ."+a);var k=y.firstChild,j=f.getCssRule("#"+d.id+" .cwidth"),u=j.style.width==k.offsetWidth+1+"px",m=o.firstChild;j.style.width=e+"px";i.style.width=e+g+"px";if(!$(document.body).hasClass("Wt-rtl")||!f.isIElt9){v.style.marginRight=g+"px";$("#"+d.id+" .Wt-scroll").css("marginRight",g+"px")}if(b!=null){b=e-b-(f.isIE6?10:7);if(b>0){var q=Math.min(b,f.pxself(f.getCssRule("#"+
d.id+" .Wt-tv-rowc"),"width"));e-=b-q;o.style.width=e+"px";k.style.width=e+"px";f.getCssRule("#"+d.id+" .Wt-tv-row").style.width=q+"px";f.isIE&&setTimeout(function(){c.find(" .Wt-tv-row").css("width",q+"px").css("width","")},0)}}else if(u){o.style.width=j.style.width;k.style.width=j.style.width}else o.style.width=k.offsetWidth+"px";if(!r&&k.offsetWidth-m.offsetWidth>=7)a.style.width=k.offsetWidth-m.offsetWidth-7+"px";d.changed=false;h&&t.adjustColumns()}};this.scrollTo=function(c,a,b,e){if(a!=-1){a*=
b;c=i.scrollTop;var g=i.clientHeight;if(e==0)if(c+g<a)e=1;else if(a<c)e=2;switch(e){case 1:i.scrollTop=a;break;case 2:i.scrollTop=a-(g-b);break;case 3:i.scrollTop=a-(g-b)/2;break}window.fakeEvent={object:i};i.onscroll(window.fakeEvent);window.fakeEvent=null}};t.adjustColumns()});
